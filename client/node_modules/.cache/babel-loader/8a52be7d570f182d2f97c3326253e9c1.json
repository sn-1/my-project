{"ast":null,"code":"import _defineProperty from\"/Users/sanjidanawrin/n3/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/sanjidanawrin/n3/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sanjidanawrin/n3/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/sanjidanawrin/n3/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/sanjidanawrin/n3/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/sanjidanawrin/n3/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,createRef}from\"react\";import\"./style.css\";var CreateUser=/*#__PURE__*/function(_Component){_inherits(CreateUser,_Component);function CreateUser(props){var _this;_classCallCheck(this,CreateUser);_this=_possibleConstructorReturn(this,_getPrototypeOf(CreateUser).call(this,props));_this.state={username:\"\",password:\"\",passwordConfirm:\"\",errorUsername:\"\",errorPassword:\"\",errorConfirm:\"\",errorRequest:\"\"};_this.handleInputChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;_this.setState(_defineProperty({},name,value));};_this.handleFormSubmit=function(event){event.preventDefault();if(!(_this.state.username&&_this.state.password&&_this.state.passwordConfirm)){_this.setState({errorUsername:\"*Please fill out your username\",errorPassword:\"*Please fill out your password\",errorConfirm:\"*Please confirm your password\"});}else if(_this.state.password.length<6){_this.setState({errorUsername:\"\",errorPassword:\"*Password should be at least 6 characters long\",errorConfirm:\"\"});}else if(_this.state.password!==_this.state.passwordConfirm){_this.setState({errorUsername:\"\",errorPassword:\"*Make sure your passwords match\",errorConfirm:\"\"});}else{fetch(\"/auth/signup\",{method:\"POST\",credentials:\"include\",mode:\"cors\",body:JSON.stringify({password:_this.state.password,username:_this.state.username}),headers:new Headers({\"Content-Type\":\"application/json\"})}).then(function(response){if(!response.ok){response.text().then(function(body){_this.setState({errorRequest:body+\" Please enter different username.\"});});return;}_this.props.login().then(function(){_this.props.history.push('/profile');});}).catch(function(err){return console.log(err);});_this.setState({username:\"\",password:\"\",passwordConfirm:\"\",errorUsername:\"\",errorPassword:\"\",errorConfirm:\"\"});}};_this.form=createRef();console.log(_this.props,props);return _this;}_createClass(CreateUser,[{key:\"componentDidMount\",value:function componentDidMount(){this.form.current.scrollIntoView({behavior:'smooth'});}},{key:\"render\",value:function render(){return React.createElement(\"form\",{ref:this.form,autocomplete:\"off\",className:\"p-4\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"username\"},\"Username\"),React.createElement(\"input\",{className:\"form-control\",value:this.state.username,onChange:this.handleInputChange,name:\"username\",placeholder:\"Username\",type:\"text\"}),React.createElement(\"p\",{className:\"error\"},this.state.errorUsername)),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"password\"},\"Password (at least 6 characters long)\"),React.createElement(\"input\",{className:\"form-control\",value:this.state.password,onChange:this.handleInputChange,name:\"password\",placeholder:\"Password\",type:\"password\"}),React.createElement(\"p\",{className:\"error\"},this.state.errorPassword)),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"passwordConfirm\"},\"Confirm Password\"),React.createElement(\"input\",{className:\"form-control\",value:this.state.passwordConfirm,onChange:this.handleInputChange,name:\"passwordConfirm\",placeholder:\"Confirm password\",type:\"password\"}),React.createElement(\"p\",{className:\"error\"},this.state.errorConfirm)),React.createElement(\"p\",{className:\"error\"},this.state.errorRequest),React.createElement(\"button\",{className:\"btn btn-primary\",onClick:this.handleFormSubmit},\"Sign Up\"));}}]);return CreateUser;}(Component);;export default CreateUser;","map":{"version":3,"sources":["/Users/sanjidanawrin/n3/client/src/components/RegisterForm/index.js"],"names":["React","Component","createRef","CreateUser","props","state","username","password","passwordConfirm","errorUsername","errorPassword","errorConfirm","errorRequest","handleInputChange","event","target","name","value","setState","handleFormSubmit","preventDefault","length","fetch","method","credentials","mode","body","JSON","stringify","headers","Headers","then","response","ok","text","login","history","push","catch","err","console","log","form","current","scrollIntoView","behavior"],"mappings":"srBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,SAA3B,KAA4C,OAA5C,CACA,MAAO,aAAP,C,GAEMC,CAAAA,U,oEACN,oBAAYC,KAAZ,CAAmB,4CAChB,4EAAMA,KAAN,GADgB,MAMhBC,KANgB,CAMR,CACLC,QAAQ,CAAE,EADL,CAELC,QAAQ,CAAE,EAFL,CAGLC,eAAe,CAAE,EAHZ,CAILC,aAAa,CAAE,EAJV,CAKLC,aAAa,CAAE,EALV,CAMLC,YAAY,CAAE,EANT,CAOLC,YAAY,CAAC,EAPR,CANQ,OAoBhBC,iBApBgB,CAoBI,SAAAC,KAAK,CAAI,mBACFA,KAAK,CAACC,MADJ,CAClBC,IADkB,eAClBA,IADkB,CACZC,KADY,eACZA,KADY,CAE1B,MAAKC,QAAL,oBACIF,IADJ,CACWC,KADX,GAGF,CAzBe,OA2BhBE,gBA3BgB,CA2BG,SAAAL,KAAK,CAAI,CACzBA,KAAK,CAACM,cAAN,GACA,GAAI,EAAE,MAAKf,KAAL,CAAWC,QAAX,EAAuB,MAAKD,KAAL,CAAWE,QAAlC,EAA8C,MAAKF,KAAL,CAAWG,eAA3D,CAAJ,CAAiF,CAC9E,MAAKU,QAAL,CAAc,CACXT,aAAa,CAAE,gCADJ,CAEXC,aAAa,CAAE,gCAFJ,CAGXC,YAAY,CAAE,+BAHH,CAAd,EAKF,CAND,IAMO,IAAI,MAAKN,KAAL,CAAWE,QAAX,CAAoBc,MAApB,CAA6B,CAAjC,CAAoC,CACxC,MAAKH,QAAL,CAAc,CACXT,aAAa,CAAE,EADJ,CAEXC,aAAa,CAAE,gDAFJ,CAGXC,YAAY,CAAE,EAHH,CAAd,EAKF,CANM,IAMA,IAAI,MAAKN,KAAL,CAAWE,QAAX,GAAwB,MAAKF,KAAL,CAAWG,eAAvC,CAAwD,CAC5D,MAAKU,QAAL,CAAc,CACXT,aAAa,CAAE,EADJ,CAEXC,aAAa,CAAE,iCAFJ,CAGXC,YAAY,CAAE,EAHH,CAAd,EAKF,CANM,IAMA,CACJW,KAAK,CAAC,cAAD,CAAiB,CACnBC,MAAM,CAAE,MADW,CAEnBC,WAAW,CAAE,SAFM,CAGnBC,IAAI,CAAE,MAHa,CAInBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAClBrB,QAAQ,CAAE,MAAKF,KAAL,CAAWE,QADH,CAElBD,QAAQ,CAAE,MAAKD,KAAL,CAAWC,QAFH,CAAf,CAJa,CAQnBuB,OAAO,CAAE,GAAIC,CAAAA,OAAJ,CAAY,CAClB,eAAgB,kBADE,CAAZ,CARU,CAAjB,CAAL,CAYCC,IAZD,CAYM,SAAAC,QAAQ,CAAI,CACf,GAAI,CAACA,QAAQ,CAACC,EAAd,CAAkB,CACfD,QAAQ,CAACE,IAAT,GAAgBH,IAAhB,CAAqB,SAACL,IAAD,CAAU,CAC5B,MAAKR,QAAL,CAAc,CACXN,YAAY,CAAEc,IAAI,CAAG,mCADV,CAAd,EAGF,CAJD,EAKA,OACF,CACD,MAAKtB,KAAL,CAAW+B,KAAX,GAAmBJ,IAAnB,CAAyB,UAAM,CAC5B,MAAK3B,KAAL,CAAWgC,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB,EACF,CAFD,EAGF,CAxBD,EAyBCC,KAzBD,CAyBO,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAzBV,EA2BA,MAAKrB,QAAL,CAAc,CACXZ,QAAQ,CAAE,EADC,CAEXC,QAAQ,CAAE,EAFC,CAGXC,eAAe,CAAE,EAHN,CAIXC,aAAa,CAAE,EAJJ,CAKXC,aAAa,CAAE,EALJ,CAMXC,YAAY,CAAE,EANH,CAAd,EAQF,CACH,CApFe,CAEhB,MAAK+B,IAAL,CAAYxC,SAAS,EAArB,CACAsC,OAAO,CAACC,GAAR,CAAY,MAAKrC,KAAjB,CAAuBA,KAAvB,EAHgB,aAIlB,C,oFAYsB,CACjB,KAAKsC,IAAL,CAAUC,OAAV,CAAkBC,cAAlB,CAAiC,CAAEC,QAAQ,CAAE,QAAZ,CAAjC,EACF,C,uCAqEQ,CACN,MACG,6BAAM,GAAG,CAAE,KAAKH,IAAhB,CAAsB,YAAY,CAAC,KAAnC,CAAyC,SAAS,CAAC,KAAnD,EACG,2BAAK,SAAS,CAAC,YAAf,EACG,6BAAO,OAAO,CAAC,UAAf,aADH,CAEG,6BAAO,SAAS,CAAC,cAAjB,CACG,KAAK,CAAE,KAAKrC,KAAL,CAAWC,QADrB,CAEG,QAAQ,CAAE,KAAKO,iBAFlB,CAGG,IAAI,CAAC,UAHR,CAIG,WAAW,CAAC,UAJf,CAKG,IAAI,CAAC,MALR,EAFH,CASG,yBAAG,SAAS,CAAC,OAAb,EAAsB,KAAKR,KAAL,CAAWI,aAAjC,CATH,CADH,CAYG,2BAAK,SAAS,CAAC,YAAf,EACG,6BAAO,OAAO,CAAC,UAAf,0CADH,CAEG,6BAAO,SAAS,CAAC,cAAjB,CACG,KAAK,CAAE,KAAKJ,KAAL,CAAWE,QADrB,CAEG,QAAQ,CAAE,KAAKM,iBAFlB,CAGG,IAAI,CAAC,UAHR,CAIG,WAAW,CAAC,UAJf,CAKG,IAAI,CAAC,UALR,EAFH,CASG,yBAAG,SAAS,CAAC,OAAb,EAAsB,KAAKR,KAAL,CAAWK,aAAjC,CATH,CAZH,CAuBG,2BAAK,SAAS,CAAC,YAAf,EACG,6BAAO,OAAO,CAAC,iBAAf,qBADH,CAEG,6BAAO,SAAS,CAAC,cAAjB,CACG,KAAK,CAAE,KAAKL,KAAL,CAAWG,eADrB,CAEG,QAAQ,CAAE,KAAKK,iBAFlB,CAGG,IAAI,CAAC,iBAHR,CAIG,WAAW,CAAC,kBAJf,CAKG,IAAI,CAAC,UALR,EAFH,CASG,yBAAG,SAAS,CAAC,OAAb,EAAsB,KAAKR,KAAL,CAAWM,YAAjC,CATH,CAvBH,CAkCG,yBAAG,SAAS,CAAC,OAAb,EAAsB,KAAKN,KAAL,CAAWO,YAAjC,CAlCH,CAmCG,8BAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAE,KAAKO,gBAAlD,YAnCH,CADH,CAyCF,C,wBAlIqBlB,S,EAmIxB,CACD,cAAeE,CAAAA,UAAf","sourcesContent":["import React, { Component, createRef } from \"react\";\nimport \"./style.css\"\n\nclass CreateUser extends Component {\nconstructor(props) {\n   super(props);\n   this.form = createRef();\n   console.log(this.props,props)\n}\n\n   state = {\n      username: \"\",\n      password: \"\",\n      passwordConfirm: \"\",\n      errorUsername: \"\",\n      errorPassword: \"\",\n      errorConfirm: \"\",\n      errorRequest:\"\"\n   }\n\n   componentDidMount() {\n      this.form.current.scrollIntoView({ behavior: 'smooth' });\n   }\n\n   handleInputChange = event => {\n      const { name, value } = event.target;\n      this.setState({\n         [name]: value\n      });\n   };\n\n   handleFormSubmit = event => {\n      event.preventDefault();\n      if (!(this.state.username && this.state.password && this.state.passwordConfirm)) {\n         this.setState({\n            errorUsername: \"*Please fill out your username\",\n            errorPassword: \"*Please fill out your password\",\n            errorConfirm: \"*Please confirm your password\"\n         });\n      } else if (this.state.password.length < 6) {\n         this.setState({\n            errorUsername: \"\",\n            errorPassword: \"*Password should be at least 6 characters long\",\n            errorConfirm: \"\"\n         });\n      } else if (this.state.password !== this.state.passwordConfirm) {\n         this.setState({\n            errorUsername: \"\",\n            errorPassword: \"*Make sure your passwords match\",\n            errorConfirm: \"\"\n         });\n      } else {\n         fetch(\"/auth/signup\", {\n            method: \"POST\",\n            credentials: \"include\",\n            mode: \"cors\",\n            body: JSON.stringify({\n               password: this.state.password,\n               username: this.state.username\n            }),\n            headers: new Headers({\n               \"Content-Type\": \"application/json\"\n            })\n         })\n         .then(response => {\n            if (!response.ok) {\n               response.text().then((body) => {\n                  this.setState({\n                     errorRequest: body + \" Please enter different username.\"\n                  })\n               })\n               return;\n            }\n            this.props.login().then( () => {\n               this.props.history.push('/profile')\n            })\n         })\n         .catch(err => console.log(err));\n\n         this.setState({\n            username: \"\",\n            password: \"\",\n            passwordConfirm: \"\",\n            errorUsername: \"\",\n            errorPassword: \"\",\n            errorConfirm: \"\"\n         });\n      }\n   };\n\n   \n   render() {\n      return (\n         <form ref={this.form} autocomplete=\"off\" className=\"p-4\">\n            <div className=\"form-group\">\n               <label htmlFor=\"username\">Username</label>\n               <input className=\"form-control\"\n                  value={this.state.username}\n                  onChange={this.handleInputChange}\n                  name=\"username\"\n                  placeholder=\"Username\"\n                  type=\"text\"\n               />\n               <p className=\"error\">{this.state.errorUsername}</p>\n            </div>\n            <div className=\"form-group\">\n               <label htmlFor=\"password\">Password (at least 6 characters long)</label>\n               <input className=\"form-control\"\n                  value={this.state.password}\n                  onChange={this.handleInputChange}\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  type=\"password\"\n               />\n               <p className=\"error\">{this.state.errorPassword}</p>\n            </div>\n            <div className=\"form-group\">\n               <label htmlFor=\"passwordConfirm\">Confirm Password</label>\n               <input className=\"form-control\"\n                  value={this.state.passwordConfirm}\n                  onChange={this.handleInputChange}\n                  name=\"passwordConfirm\"\n                  placeholder=\"Confirm password\"\n                  type=\"password\"\n               />\n               <p className=\"error\">{this.state.errorConfirm}</p>\n            </div>\n            <p className=\"error\">{this.state.errorRequest}</p>\n            <button className=\"btn btn-primary\" onClick={this.handleFormSubmit}>\n               Sign Up\n            </button>\n         </form>\n      )\n   }\n};\nexport default CreateUser;\n\n"]},"metadata":{},"sourceType":"module"}